#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
GPT-5 최적화 프롬프트 생성 함수
"""

def generate_gpt5_optimized_prompt(career: str, career_values: list, previous_issues: list = None) -> str:
    """GPT-5에 최적화된 이슈 생성 프롬프트"""
    
    if previous_issues is None:
        previous_issues = []
    
    # Few-shot 예시 추가
    examples = """
**예시 (참고용, 절대 복사하지 말 것):**
개발자 분야 예시:
1. AI 기술 발전으로 인한 개발자 역할 변화와 새로운 스킬 요구사항 증가
2. 코딩 부트캠프 증가로 인한 신입 개발자 간 경쟁 심화 문제
3. 원격근무 확산이 개발자 협업 방식과 커뮤니케이션에 미치는 영향
4. 개인정보보호법 강화가 개발자의 데이터 처리 업무에 미치는 제약
5. 스타트업 붐으로 인한 개발자 이직률 증가와 경력 관리의 어려움
"""
    
    # 중복 방지 강화
    avoid_section = ""
    if previous_issues:
        avoid_section = f"""
🚫 **절대 금지사항 (매우 중요):**
다음과 동일하거나 유사한 주제는 절대 사용하지 마세요:
{chr(10).join([f'- {issue}' for issue in previous_issues])}

위 내용과 관련된 모든 키워드, 개념, 주제를 피하고 완전히 새로운 관점에서 접근하세요.
"""
    
    prompt = f"""
당신은 한국의 진로 상담 전문가입니다. 

**임무:** {career} 분야에서 한국 고등학생이 탐구할 만한 현재 이슈 5개를 생성하세요.

**단계별 사고 과정:**
1단계: {career} 분야의 현재 한국 사회 동향 파악
2단계: 고등학생 관점에서 접근 가능한 주제 식별  
3단계: 기존 이슈와 중복되지 않는 새로운 관점 도출
4단계: 구체적이고 탐구 가능한 형태로 문제 정의

**조건:**
- 직업: {career}
- 가치관: {', '.join(career_values)}
- 각 이슈는 70-90자로 구체적 설명 포함
- 2024-2025년 현재 한국에서 실제 논의되는 내용
- 고등학생이 자료조사와 분석이 가능한 수준
- 서로 완전히 다른 영역/관점의 이슈

{avoid_section}

{examples}

**필수 요구사항:**
✅ 각 이슈는 서로 다른 카테고리 (기술/사회/경제/환경/정책 등)
✅ 창의적이고 참신한 관점
✅ 구체적인 상황과 맥락 포함
✅ 고등학생 수준에서 이해하기 쉬운 표현

**출력 형식 (정확히 따라주세요):**
1. [첫 번째 이슈 - 70-90자]
2. [두 번째 이슈 - 70-90자]  
3. [세 번째 이슈 - 70-90자]
4. [네 번째 이슈 - 70-90자]
5. [다섯 번째 이슈 - 70-90자]
"""
    
    return prompt

if __name__ == "__main__":
    # 테스트용
    test_prompt = generate_gpt5_optimized_prompt(
        "개발자", 
        ["능력 발휘 - 전문성과 역량을 발휘하고 성장할 수 있는 일"],
        ["기술 변화에 대한 적응 과제", "전문성 개발 요구 증가"]
    )
    print("GPT-5 최적화 프롬프트:")
    print(test_prompt)